<main>
    <h1>登録テスト</h1>
    <form action="/medicine-register" method="post">
        <% if (typeof data !== "undefined" && data.errorMsg.medicineName !== false) { %>
            <p class="medicine_register_error_message"><%= data.errorMsg.medicineName %></p>
        <% } %>
        <% if (typeof data !== "undefined" && data.errorMsg.medicineName == false) { %>
            薬名 <input type="text" name="medicineName" value="<%= data.request.medicineName %>"><br>
        <% }else{ %>
            薬名 <input type="text" name="medicineName" value=""><br>
        <% } %>

        <% if (typeof data !== "undefined" && data.errorMsg.hospitalName !== false) { %>
            <p class="medicine_register_error_message"><%= data.errorMsg.hospitalName %></p>
        <% } %>
        <% if (typeof data !== "undefined" && data.errorMsg.hospitalName == false) { %>
            病院名 <input type="text" name="hospitalName" value="<%= data.request.hospitalName %>"><br>
        <% }else{ %>
            病院名 <input type="text" name="hospitalName" value=""><br>
        <% } %>

        <% if (typeof data !== "undefined" && data.errorMsg.number !== false) { %>
            <p class="medicine_register_error_message"><%= data.errorMsg.number %></p>
        <% } %>
        <% if (typeof data !== "undefined" && data.errorMsg.number == false) { %>
            飲む個数 <input type="text" name="number" value="<%= data.request.number %>"><br>
        <% }else{ %>
            飲む個数 <input type="text" name="number" value=""><br>
        <% } %>

        <% if (typeof data !== "undefined" && data.errorMsg.takeTime !== false) { %>
            <% for (var key in data.errorMsg.takeTime) { %>
                <% if(data.errorMsg.takeTime.hasOwnProperty(key) && key !== false){ %>
                    <p class="medicine_register_error_message"><%= data.errorMsg.takeTime[key] %></p>
                    <% break; %>
                <% } %>
            <% } %>
        <% } %>
        <% if (typeof data !== "undefined" && Object.keys(data.request.takeTime).filter((key) => {
            return data.request.takeTime[key] === '1'
        }).length > 0) { %>
            飲む時間  朝<input type="checkbox" name="takeTime[]" value="1" checked="checked">
        <% }else{ %>
            飲む時間  朝<input type="checkbox" name="takeTime[]" value="1">
        <% } %>
        <% if (typeof data !== "undefined" && Object.keys(data.request.takeTime).filter((key) => {
            return data.request.takeTime[key] === '2'
        }).length > 0) { %>
            昼<input type="checkbox" name="takeTime[]" value="2" checked="checked">
        <% }else{ %>
            昼<input type="checkbox" name="takeTime[]" value="2">
        <% } %>
        <% if (typeof data !== "undefined" && Object.keys(data.request.takeTime).filter((key) => {
            return data.request.takeTime[key] === '3'
        }).length > 0) { %>
            食前<input type="checkbox" name="takeTime[]" value="3" checked="checked">
        <% }else{ %>
            食前<input type="checkbox" name="takeTime[]" value="3">
        <% } %>
        <% if (typeof data !== "undefined" && Object.keys(data.request.takeTime).filter((key) => {
            return data.request.takeTime[key] === '4'
        }).length > 0) { %>
            食前<input type="checkbox" name="takeTime[]" value="4" checked="checked"><br>
        <% }else{ %>
            食前<input type="checkbox" name="takeTime[]" value="4"><br>
        <% } %>

        <% if (typeof data !== "undefined" && data.errorMsg.startsDate !== false) { %>
            <p class="medicine_register_error_message"><%= data.errorMsg.startsDate %></p>
        <% } %>

        <% if (typeof data !== "undefined" && data.errorMsg.startsDate == false) { %>
            処方日 <input type="date" name="startsDate" value="<%= data.request.startsDate %>">年<br>
        <% }else{ %>
            処方日 <input type="date" name="startsDate" value="">年<br>
        <% } %>

        <% if (typeof data !== "undefined" && data.errorMsg.period !== false) { %>
            <p class="medicine_register_error_message"><%= data.errorMsg.period %></p>
        <% } %>
        <% if (typeof data !== "undefined" && data.errorMsg.period == false) { %>
            処方期間 <input type="text" name="period" value="<%= data.request.period %>">日<br>
        <% }else{ %>
            処方期間 <input type="text" name="period" value="">日<br>
        <% } %>

        <!--種別：錠剤とか粉薬とか、を<select>でvalueは1,2,3...-->
        <% if (typeof data !== "undefined" && data.errorMsg.medicineType !== false) { %>
            <p class="medicine_register_error_message"><%= data.errorMsg.medicineType %></p>
        <% } %>
        <% if (typeof data !== "undefined" && data.errorMsg.medicineType == false) { %>
            種別 <input type="text" name="medicineType" value="<%= data.request.medicineType %>"><br>
        <% }else{ %>
            種別 <input type="text" name="medicineType" value=""><br>
        <% } %>

        <% if (typeof data !== "undefined" && data.errorMsg.description !== false) { %>
            <p class="medicine_register_error_message"><%= data.errorMsg.description %></p>
        <% } %>
        <% if (typeof data !== "undefined" && data.errorMsg.description == false) { %>
            説明 <input type="text" name="description" value="<%= data.request.description %>"><br>
        <% }else{ %>
            説明 <input type="text" name="description" value=""><br>
        <% } %>
        <input type="submit" value="登録">
    </form>
</main>